# ═══════════════════════════════════════════════════════════════
# 健康计算器 - 环境变量配置模板
# ═══════════════════════════════════════════════════════════════
# 
# 使用说明:
# 1. 复制此文件并重命名为 .env.local (本地开发) 或 .env (生产环境)
# 2. 填入您的实际配置信息
# 3. 不要将 .env.local 或 .env 文件提交到 Git 仓库
#
# ═══════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────
# 数据库配置
# ───────────────────────────────────────────────────────────────

# PostgreSQL 数据库连接字符串
# 格式: postgresql://用户名:密码@主机:端口/数据库名?参数
# 示例 (Neon): postgresql://user:password@ep-xxx.us-east-2.aws.neon.tech/dbname?sslmode=require
# 示例 (Supabase): postgresql://postgres:password@db.xxx.supabase.co:5432/postgres
# 示例 (本地): postgresql://postgres:password@localhost:5432/health_calculator
DATABASE_URL="postgresql://用户名:密码@主机:端口/数据库名?sslmode=require"

# ───────────────────────────────────────────────────────────────
# 安全配置
# ───────────────────────────────────────────────────────────────

# JWT 密钥 - 用于生成和验证用户登录令牌
# 重要: 请使用随机字符串，长度至少 32 位
# 生成方法: 
#   - 在线生成: https://www.random.org/strings/
#   - Node.js: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#   - OpenSSL: openssl rand -hex 32
JWT_SECRET="your-super-secret-jwt-key-at-least-32-characters-long-change-this"

# ───────────────────────────────────────────────────────────────
# 运行环境
# ───────────────────────────────────────────────────────────────

# 运行环境: development（开发） | production（生产）| test（测试）
# 开发环境会启用详细的错误信息和日志
# 生产环境会启用性能优化和安全增强
NODE_ENV="production"

# ───────────────────────────────────────────────────────────────
# 可选配置（如果需要）
# ───────────────────────────────────────────────────────────────

# Next.js 基础路径（如果部署在子目录）
# 示例: /health-calculator
# NEXT_PUBLIC_BASE_PATH=""

# API 基础 URL（如果使用外部 API）
# 示例: https://api.example.com
# NEXT_PUBLIC_API_URL=""

# ═══════════════════════════════════════════════════════════════
# 部署平台特定配置
# ═══════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────
# Vercel 部署
# ───────────────────────────────────────────────────────────────
# Vercel 会自动设置这些变量，通常不需要手动配置
# VERCEL="1"
# VERCEL_URL="your-app.vercel.app"

# ───────────────────────────────────────────────────────────────
# EdgeOne Pages / 腾讯云 CloudBase
# ───────────────────────────────────────────────────────────────
# EdgeOne Pages 会自动设置这些变量
# 在控制台的环境变量设置中配置 DATABASE_URL 和 JWT_SECRET

# ───────────────────────────────────────────────────────────────
# Railway / Render
# ───────────────────────────────────────────────────────────────
# Railway 和 Render 会自动提供 DATABASE_URL
# 您只需要在控制台添加 JWT_SECRET

# ═══════════════════════════════════════════════════════════════
# 数据库提供商配置指南
# ═══════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────
# Neon (推荐 - 免费层)
# ───────────────────────────────────────────────────────────────
# 1. 访问 https://neon.tech
# 2. 创建新项目
# 3. 复制连接字符串（Connection String）
# 4. 粘贴到 DATABASE_URL
# 示例: postgresql://user:password@ep-xxx.us-east-2.aws.neon.tech/neondb?sslmode=require

# ───────────────────────────────────────────────────────────────
# Supabase (推荐 - 免费层)
# ───────────────────────────────────────────────────────────────
# 1. 访问 https://supabase.com
# 2. 创建新项目
# 3. 进入 Settings > Database
# 4. 复制 Connection String (URI)
# 5. 粘贴到 DATABASE_URL
# 示例: postgresql://postgres:[YOUR-PASSWORD]@db.xxx.supabase.co:5432/postgres

# ───────────────────────────────────────────────────────────────
# 本地开发 (Docker)
# ───────────────────────────────────────────────────────────────
# docker run -d \
#   --name postgres \
#   -e POSTGRES_PASSWORD=mypassword \
#   -e POSTGRES_DB=health_calculator \
#   -p 5432:5432 \
#   postgres:15
# 
# DATABASE_URL="postgresql://postgres:mypassword@localhost:5432/health_calculator"

# ═══════════════════════════════════════════════════════════════
# 数据库初始化
# ═══════════════════════════════════════════════════════════════

# 配置完 DATABASE_URL 后，运行以下命令初始化数据库:
# 
# 1. 生成 Prisma Client:
#    npm run prisma:generate
# 
# 2. 运行数据库迁移:
#    npm run prisma:migrate
# 
# 3. (可选) 填充初始数据:
#    npm run prisma:seed
# 
# 4. (可选) 打开数据库管理界面:
#    npm run prisma:studio

# ═══════════════════════════════════════════════════════════════
# 安全提示
# ═══════════════════════════════════════════════════════════════
# 
# ⚠️  重要安全提示:
# 
# 1. 不要将 .env 或 .env.local 文件提交到 Git
#    - 这些文件已在 .gitignore 中排除
# 
# 2. JWT_SECRET 必须是强随机字符串
#    - 不要使用示例中的值
#    - 建议长度至少 32 个字符
# 
# 3. 数据库密码要使用强密码
#    - 包含大小写字母、数字和特殊字符
#    - 长度至少 16 个字符
# 
# 4. 在生产环境使用环境变量
#    - Vercel: 在项目设置中配置
#    - EdgeOne: 在控制台环境变量中配置
#    - Railway/Render: 在项目设置中配置
# 
# 5. 定期轮换密钥
#    - 建议每 3-6 个月更新 JWT_SECRET
#    - 更新后需要用户重新登录
#
# ═══════════════════════════════════════════════════════════════

