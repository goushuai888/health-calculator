# 更新日志

## [1.0.1] - 2025-11-08

### 新增功能

#### 管理员重置用户密码 🔐
- ✨ 管理员可在用户管理页面直接重置任何用户的密码
- ✨ 美观的重置密码弹窗界面
- ✨ 实时密码验证和提示
- ✨ 双重密码确认机制
- 🔒 管理员不能重置自己的密码
- 🔒 密码使用 bcrypt 安全加密
- 🔒 完整的权限验证

### 代码清理

#### 移除调试代码 🧹
- 🗑️ 删除 `/api/debug` 调试端点
- 🗑️ 删除 `/api/health` 健康检查端点
- 🗑️ 所有代码按照生产环境标准重构
- 📦 优化 `.gitignore`，排除测试和临时文件

#### 文档整理 📚
- 📁 归档功能文档到 `docs/archive/`
- 📝 更新 README.md 反映最新功能
- 🧹 清理临时配置文件
- ✅ 项目结构更加清晰

---

## [1.0.0] - 2025-11-08

### 重大更新

#### 数据库迁移
- 🚀 从 Supabase 迁移到 Neon PostgreSQL
- ✅ 连接更简单，无需复杂 SSL 配置
- ✅ 免费额度更大（3GB vs 500MB）
- ✅ 专为无服务器环境优化

#### 功能完善
- ✨ 实现完整的访客模式（无需登录即可使用）
- 👑 添加管理员面板和用户管理功能
- 📊 统一历史记录时间线展示
- 🔄 侧边栏导航，便捷切换计算器
- 🔐 改为用户名登录（不再使用邮箱）

#### 性能优化
- ⚡ 全局用户状态管理（React Context）
- ⚡ 修复登录状态闪烁问题
- ⚡ 优化 API 错误处理
- ⚡ 修复 React 水合警告

#### 安全增强
- 🔒 使用 128 位随机 JWT 密钥
- 🔒 数据库连接强制 SSL
- 🔒 环境变量不提交到 Git

### 技术栈更新

#### 前端
- Next.js 14 (App Router)
- React 18
- TypeScript
- Tailwind CSS
- date-fns

#### 后端
- Neon PostgreSQL（新）
- Prisma ORM
- Next.js API Routes
- Zod 数据验证

#### 部署
- EdgeOne Pages（当前）
- 支持 Vercel

### 计算器列表（8 个）

1. BMI 计算器 - 身体质量指数
2. BMR 计算器 - 基础代谢率
3. 体脂率计算器 - 身体脂肪百分比
4. 腰臀比计算器 - 中心性肥胖风险
5. 血压评估 - 血压水平分类
6. 目标心率 - 运动心率区间
7. 运动负荷指数 - 运动强度评估
8. 热量需求 - 每日热量摄入

### Bug 修复

- 🐛 修复 TypeScript 类型错误
- 🐛 修复 `toFixed` null 错误
- 🐛 修复 BMR/热量计算器的 activityLevel 类型错误
- 🐛 修复 Input 组件缺少 help 属性
- 🐛 修复 401/500 错误处理
- 🐛 修复数据库连接问题

### 文档更新

- 📝 更新 README.md
- 📝 创建 CHANGELOG.md
- 📝 归档旧文档到 docs/archive/
- 📝 清理临时配置文件

---

## [0.1.0] - 2025-11-07

### 初始版本

- ✨ 基础项目搭建
- ✨ 实现 8 个健康计算器
- ✨ 用户认证系统
- ✨ 历史记录功能
- ✨ Supabase 数据库集成
- ✨ 响应式 UI 设计

---

**说明**：
- 🚀 重大功能
- ✨ 新功能
- 🐛 Bug 修复
- ⚡ 性能优化
- 🔒 安全更新
- 📝 文档更新
- 👑 管理功能

